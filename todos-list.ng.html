<div class="container">
    <header>
        <meteor-include src="loginButtons"></meteor-include>
    </header>


    <div ng-if="$root.currentUser" class="chat-box">
        <p id="headerText">Chat Room</p>

        <div ng-if="!$root.currentUser">
            <h1>Please log in to use the chat room</h1>
        </div>
        <form class="new-task" ng-submit="addMessage(newMessage); newMessage='';">
            <input type="text" ng-model="newMessage" name="Text" placeholder="New Message"/>
        </form>
        <div id="all-messages">
            <ul ng-repeat="eachMessage in messages">

                <li><span id="username">{{eachMessage.username}}: </span>{{eachMessage.message}}
                    <div id="messageTime"> {{getTimeDiff(eachMessage.createdAt);}} ago</div>
                </li>
            </ul>
        </div>
    </div>

    <div class="tasks">
        <p id="headerText">Todo List ( {{ incompleteCount() }} )</p>
        <label class="hide-completed">
            <input type="checkbox" ng-model="$parent.hideCompleted"/>
            Hide Completed Tasks
        </label>

        <form class="new-task"
              ng-submit="addTask(newTask); newTask='';"
              ng-show="$root.currentUser">
            <input ng-model="newTask" type="text"
                   name="text" placeholder="Type to add new tasks"/>
        </form>
        <div id="all-tasks">
            <ul ng-repeat="task in tasks">
                <li ng-class="{'checked': task.checked, 'private': task.private}">
                    <button class="delete" ng-click="deleteTask(task)">&times;</button>

                    <input type="checkbox" ng-checked="task.checked"
                           ng-click="setChecked(task)" class="toggle-checked"/>

                    <button class="toggle-private"
                            ng-if="task.owner === $root.currentUser._id"
                            ng-click="setPrivate(task)">
                        {{task.private == true ? "Private" : "Public"}}
                    </button>

      <span class="text">
        <strong>{{task.username}}</strong> - {{task.text}}
      </span>
                </li>
            </ul>
        </div>
    </div>
</div>
